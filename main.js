!function(){"use strict";const e={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},t=document.querySelector(".profile__button-add"),s=document.querySelector(".profile__button-edit"),n=(document.querySelector(".popup__input_type_titlePlace"),document.querySelector(".popup__button-add-close"),document.querySelector(".popup__button-edit-close"),document.querySelector(".popup__button-preview-close"),document.querySelector(".popup__form-add")),o=document.querySelector(".popup__form-edit"),r=o.querySelector(".popup__input_type_title"),i=o.querySelector(".popup__input_type_description");var l=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_toggleInputError(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputList.every((e=>e.validity.valid))}disableSubmitButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0}_enableSubmitButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableSubmitButton():this._enableSubmitButton()}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this.disableSubmitButton(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputError(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}},u=class{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}openPopup(){this._popupElement.classList.add("popup_is-opened"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._popupElement.classList.remove("popup_is-opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.closePopup()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("popup")&&this.closePopup()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("popup__button-close")&&this.closePopup()}))}},a=class extends u{constructor(e,t){super(e),this._modalForm=this._popupElement.querySelector("form"),this.handleFormSubmit=t}_getInputValues(){const e=this._popupElement.querySelectorAll(".popup__input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}closePopup(){this._modalForm.reset(),super.closePopup()}setEventListeners(){this._popupElement.addEventListener("submit",(()=>{const e=this._getInputValues();this.handleFormSubmit(e)})),super.setEventListeners()}};const p=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(`.${t}`)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=new class{constructor(e,t){let{data:s,handleImageClick:n}=e;this._name=s.name,this._link=s.link,this._cardSelector=t,this._handleImageClick=n,this._likeButton=document.querySelector(".card__button-favorite")}_setEventListeners(){this._element.querySelector(".card__button-favorite").addEventListener("click",(()=>this._handleLikeButton())),this._element.querySelector(".card__button-delete").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick(this._link,this._name)))}_handleLikeButton(){this._element.querySelector(".card__button-favorite").classList.toggle("card__button-favorite_state_active")}_handleDeleteCard(){this._element.remove(),this._element=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){this._element=this._getTemplate();const e=this._element.querySelector(".card__image");return e.src=this._link,e.alt=`Photo of ${this._name}`,this._element.querySelector(".card__text").textContent=this._name,this._setEventListeners(),this._element}}({data:e,handleImageClick:()=>{E.openPopup(e)}},"#card-tmpl");p.addItem(t.getView())}},"cards"),c=new a(".popup_type_add",(e=>{const t=[];t.push(e),p.renderItems(t),c.closePopup()})),_=new a(".popup_type_edit",(e=>{d.setUserInfo({userName:e.title,userDescription:e.description}),_.closePopup()})),d=new class{constructor(e){let{userTitleSelector:t,userDescSelector:s}=e;this._userNameEl=document.querySelector(t),this._userDescEl=document.querySelector(s)}getUserInfo(){return{userName:this._userNameEl.textContent,userDescription:this._userDescEl.textContent}}setUserInfo(e){let{userName:t,userDescription:s}=e;this._userNameEl.textContent=t,this._userDescEl.textContent=s}}({userTitleSelector:".profile__title",userDescSelector:".profile__description"}),h=new l(e,o),m=new l(e,n),E=new class extends u{constructor(e){super(e)}openPopup(e){let{link:t,name:s}=e;this._popupElement.querySelector(".popup__preview-caption").textContent=s;const n=this._popupElement.querySelector(".popup__preview-image");n.src=t,n.alt=`Photo of ${s}`,super.openPopup()}}(".js-preview-popup");p.renderItems([{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg "}]),E.setEventListeners(),c.setEventListeners(),_.setEventListeners(),h.enableValidation(),m.enableValidation(),t.addEventListener("click",(()=>{c.openPopup(),m.resetValidation()})),s.addEventListener("click",(()=>{_.openPopup();const e=d.getUserInfo();r.value=e.userName,i.value=e.userDescription,h.resetValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VSxHQUFnQixJQUFoQixLQUFFb0MsRUFBSSxLQUFFcEIsR0FBTSxFQUN0QjFELEtBQUt1QyxjQUFjaEQsY0FBYywyQkFBMkJzQixZQUMxRDZDLEVBQ0YsTUFBTXVELEVBQVFqSCxLQUFLdUMsY0FBY2hELGNBQWMseUJBQy9DMEgsRUFBTXRCLElBQU1iLEVBQ1ptQyxFQUFNckIsSUFBTyxZQUFXbEMsSUFDeEJOLE1BQU1WLFdBQ1IsR1JxQzRCLHFCSWdCOUJtQixFQUFZSyxZSmhFZ0IsQ0FDMUIsQ0FDRVIsS0FBTSxrQkFDTm9CLEtBQU0sb0RBR1IsQ0FDRXBCLEtBQU0sY0FDTm9CLEtBQU0sdURBR1IsQ0FDRXBCLEtBQU0saUJBQ05vQixLQUFNLDBEQUdSLENBQ0VwQixLQUFNLFVBQ05vQixLQUFNLG1EQUdSLENBQ0VwQixLQUFNLHdCQUNOb0IsS0FBTSxtREFHUixDQUNFcEIsS0FBTSxpQkFDTm9CLEtBQU0sbURJcUNWZSxFQUFpQi9DLG9CQUNqQmdELEVBQWVoRCxvQkFDZm9ELEVBQWdCcEQsb0JBQ2hCZ0UsRUFBa0IzRSxtQkFDbEI2RSxFQUFrQjdFLG1CQUVsQjlDLEVBQWU0QyxpQkFBaUIsU0FBUyxLQUN2QzZELEVBQWVwRCxZQUNmc0UsRUFBa0I5RSxpQkFBaUIsSUFHckMxQyxFQUFrQnlDLGlCQUFpQixTQUFTLEtBQzFDaUUsRUFBZ0J4RCxZQUNoQixNQUFNd0UsRUFBV2YsRUFBZ0JVLGNBQ2pDbEgsRUFBa0JnRSxNQUFRdUQsRUFBU2IsU0FDbkN6RyxFQUF3QitELE1BQVF1RCxFQUFTWCxnQkFDekNPLEVBQWtCNUUsaUJBQWlCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgRVNDX0tFWUNPREUgPSBcIkVzY2FwZVwiO1xuZXhwb3J0IGNvbnN0IG9wZW5lZE1vZGFsID0gXCJwb3B1cF9pcy1vcGVuZWRcIjtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcbiAgfSxcblxuICB7XG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXG4gIH0sXG5cbiAge1xuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICB9LFxuXG4gIHtcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZyBcIixcbiAgfSxcbl07XG5cbmV4cG9ydCBjb25zdCBjYXJkU2VsZWN0b3JzID0ge1xuICBjYXJkU2VjdGlvbjogXCJjYXJkc1wiLFxuICBjYXJkVGVtcGxhdGU6IFwiI2NhcmQtdG1wbFwiLFxuICBwcmV2aWV3UG9wdXA6IFwicG9wdXBfdHlwZV9pbWFnZVwiXG59XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBhZGRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWVkaXRcIik7XG5leHBvcnQgY29uc3QgcHJldmlld0ltYWdlRWwgPSBcIi5qcy1wcmV2aWV3LXBvcHVwXCJcbmV4cG9ydCBjb25zdCBjYXJkRm9ybU1vZGFsID0gXCIucG9wdXBfdHlwZV9hZGRcIjtcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybU1vZGFsID0gXCIucG9wdXBfdHlwZV9lZGl0XCI7XG5leHBvcnQgY29uc3QgY2FyZFRpdGxlUGxhY2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19pbnB1dF90eXBlX3RpdGxlUGxhY2VcIlxuKTtcbmV4cG9ydCBjb25zdCBjYXJkTW9kYWxDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19idXR0b24tYWRkLWNsb3NlXCJcbik7XG5leHBvcnQgY29uc3QgZWRpdE1vZGFsQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9fYnV0dG9uLWVkaXQtY2xvc2VcIlxuKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnBvcHVwX19idXR0b24tcHJldmlldy1jbG9zZVwiXG4pO1xuZXhwb3J0IGNvbnN0IGNhcmRGb3JtRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWFkZFwiKTtcbmV4cG9ydCBjb25zdCBlZGl0Rm9ybUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1lZGl0XCIpO1xuZXhwb3J0IGNvbnN0IHRpdGxlU2VsZWN0b3IgPSBcIi5wcm9maWxlX190aXRsZVwiXG5leHBvcnQgY29uc3QgZGVzY1NlbGVjdG9yID0gXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIlxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZWRpdEZvcm1FbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV90aXRsZVwiXG4pO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZWRpdEZvcm1FbC5xdWVyeVNlbGVjdG9yKFxuICBcIi5wb3B1cF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiXG4pO1xuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfdG9nZ2xlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiAhdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KFxuICAgICAgKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkXG4gICAgKTtcbiAgfVxuXG4gIGRpc2FibGVTdWJtaXRCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3VibWl0QnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJpbXBvcnQgeyBFU0NfS0VZQ09ERSB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuUG9wdXAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9pcy1vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2VQb3B1cCgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX2lzLW9wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IEVTQ19LRVlDT0RFKSB7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19idXR0b24tY2xvc2VcIikpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG4gICAgdGhpcy5oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG5cbiAgICBjb25zdCBmb3JtRGF0YSA9IHt9O1xuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4gKGZvcm1EYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcbiAgICByZXR1cm4gZm9ybURhdGE7XG4gIH1cblxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX21vZGFsRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdChmb3JtRGF0YSk7XG4gICAgfSk7XG5cbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCB7XG4gIHZhbGlkYXRpb25TZXR0aW5ncyxcbiAgaW5pdGlhbENhcmRzLFxuICBjYXJkU2VsZWN0b3JzLFxuICBhZGRNb2RhbEJ1dHRvbixcbiAgcHJvZmlsZUVkaXRCdXR0b24sXG4gIG9wZW5lZE1vZGFsLFxuICBjYXJkRm9ybU1vZGFsLFxuICBlZGl0Rm9ybU1vZGFsLFxuICBwcmV2aWV3SW1hZ2VFbCxcbiAgY2FyZEZvcm1FbCxcbiAgZWRpdEZvcm1FbCxcbiAgdGl0bGVTZWxlY3RvcixcbiAgZGVzY1NlbGVjdG9yLFxuICBwcm9maWxlVGl0bGVJbnB1dCxcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlcyBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZXMuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICBjb25zdCBjYXJkRWwgPSBuZXcgQ2FyZChcbiAgICAgICAge1xuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgaGFuZGxlSW1hZ2VDbGljazogKCkgPT4ge1xuICAgICAgICAgICAgY2FyZFByZXZpZXdQb3B1cC5vcGVuUG9wdXAoZGF0YSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgY2FyZFNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcbiAgICAgICk7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbC5nZXRWaWV3KCkpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRTZWxlY3RvcnMuY2FyZFNlY3Rpb25cbik7XG5cbmNvbnN0IGFkZFBvcHVwV2luZG93ID0gbmV3IFBvcHVwV2l0aEZvcm0oY2FyZEZvcm1Nb2RhbCwgKGZvcm1EYXRhKSA9PiB7XG4gIGNvbnN0IG5ld0NhcmQgPSBbXTtcbiAgbmV3Q2FyZC5wdXNoKGZvcm1EYXRhKTtcbiAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMobmV3Q2FyZCk7XG4gIGFkZFBvcHVwV2luZG93LmNsb3NlUG9wdXAoKTtcbn0pO1xuXG5jb25zdCBlZGl0UG9wdXBXaW5kb3cgPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0Rm9ybU1vZGFsLCAoZm9ybURhdGEpID0+IHtcbiAgdXNlckluZm9EaXNwbGF5LnNldFVzZXJJbmZvKHtcbiAgICB1c2VyTmFtZTogZm9ybURhdGEudGl0bGUsXG4gICAgdXNlckRlc2NyaXB0aW9uOiBmb3JtRGF0YS5kZXNjcmlwdGlvbixcbiAgfSk7XG4gIGVkaXRQb3B1cFdpbmRvdy5jbG9zZVBvcHVwKCk7XG59KTtcblxuY29uc3QgdXNlckluZm9EaXNwbGF5ID0gbmV3IFVzZXJJbmZvKHtcbiAgdXNlclRpdGxlU2VsZWN0b3I6IHRpdGxlU2VsZWN0b3IsXG4gIHVzZXJEZXNjU2VsZWN0b3I6IGRlc2NTZWxlY3Rvcixcbn0pO1xuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVkaXRGb3JtRWwpO1xuY29uc3QgY2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGNhcmRGb3JtRWwpO1xuY29uc3QgY2FyZFByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZXMocHJldmlld0ltYWdlRWwpO1xuXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHMpO1xuY2FyZFByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuYWRkUG9wdXBXaW5kb3cuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmVkaXRQb3B1cFdpbmRvdy5zZXRFdmVudExpc3RlbmVycygpO1xuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5hZGRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGRQb3B1cFdpbmRvdy5vcGVuUG9wdXAoKTtcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG5cbn0pO1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZWRpdFBvcHVwV2luZG93Lm9wZW5Qb3B1cCgpO1xuICBjb25zdCB1c2VySW5mbyA9IHVzZXJJbmZvRGlzcGxheS5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLnVzZXJOYW1lO1xuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbmZvLnVzZXJEZXNjcmlwdGlvbjtcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtjb250YWluZXJTZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlSW1hZ2VDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWZhdm9yaXRlXCIpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1mYXZvcml0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWRlbGV0ZVwiKVxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpO1xuXG4gICAgdGhpcy5fZWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKVxuICAgICAgKTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uKCkge1xuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi1mYXZvcml0ZVwiKVxuICAgICAgLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tZmF2b3JpdGVfc3RhdGVfYWN0aXZlXCIpO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgY29uc3QgaW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIGltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGltYWdlRWxlbWVudC5hbHQgPSBgUGhvdG8gb2YgJHt0aGlzLl9uYW1lfWA7XG4gICAgY29uc3QgY2FyZFRleHQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcbiAgICBjYXJkVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlclRpdGxlU2VsZWN0b3IsIHVzZXJEZXNjU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJUaXRsZVNlbGVjdG9yKTtcbiAgICB0aGlzLl91c2VyRGVzY0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyRGVzY1NlbGVjdG9yKTsgIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXNlck5hbWU6IHRoaXMuX3VzZXJOYW1lRWwudGV4dENvbnRlbnQsXG4gICAgICB1c2VyRGVzY3JpcHRpb246IHRoaXMuX3VzZXJEZXNjRWwudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHt1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9ufSkge1xuICAgIHRoaXMuX3VzZXJOYW1lRWwudGV4dENvbnRlbnQgPSB1c2VyTmFtZTtcbiAgICB0aGlzLl91c2VyRGVzY0VsLnRleHRDb250ZW50ID0gdXNlckRlc2NyaXB0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlcyBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlblBvcHVwKHsgbGluaywgbmFtZSB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctY2FwdGlvblwiKS50ZXh0Q29udGVudCA9XG4gICAgICBuYW1lO1xuICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3ByZXZpZXctaW1hZ2VcIik7XG4gICAgaW1hZ2Uuc3JjID0gbGluaztcbiAgICBpbWFnZS5hbHQgPSBgUGhvdG8gb2YgJHtuYW1lfWA7XG4gICAgc3VwZXIub3BlblBvcHVwKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2VzO1xuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiYWRkTW9kYWxCdXR0b24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImNhcmRGb3JtRWwiLCJlZGl0Rm9ybUVsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2VFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX3RvZ2dsZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dExpc3QiLCJldmVyeSIsImRpc2FibGVTdWJtaXRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW5Qb3B1cCIsImNsb3NlUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldmVudCIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfbW9kYWxGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRMaXN0IiwiZm9ybURhdGEiLCJpbnB1dCIsIm5hbWUiLCJ2YWx1ZSIsInJlc2V0IiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiZGF0YSIsImNhcmRFbCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlSW1hZ2VDbGljayIsIl9saWtlQnV0dG9uIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidG9nZ2xlIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJpbWFnZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJjYXJkUHJldmlld1BvcHVwIiwiYWRkUG9wdXBXaW5kb3ciLCJQb3B1cFdpdGhGb3JtIiwibmV3Q2FyZCIsInB1c2giLCJlZGl0UG9wdXBXaW5kb3ciLCJ1c2VySW5mb0Rpc3BsYXkiLCJzZXRVc2VySW5mbyIsInVzZXJOYW1lIiwidGl0bGUiLCJ1c2VyRGVzY3JpcHRpb24iLCJkZXNjcmlwdGlvbiIsInVzZXJUaXRsZVNlbGVjdG9yIiwidXNlckRlc2NTZWxlY3RvciIsIl91c2VyTmFtZUVsIiwiX3VzZXJEZXNjRWwiLCJnZXRVc2VySW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImNhcmRGb3JtVmFsaWRhdG9yIiwiaW1hZ2UiLCJ1c2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=